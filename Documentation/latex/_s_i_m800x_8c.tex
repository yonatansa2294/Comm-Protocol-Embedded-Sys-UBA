\doxysection{C\+:/\+Users/\+Jonatan/\+One\+Drive/\+Escritorio/\+PCSE/\+Driver\+\_\+\+SIM800x/\+Src/\+SIM800x.c File Reference}
\label{_s_i_m800x_8c}\index{C:/Users/Jonatan/OneDrive/Escritorio/PCSE/Driver\_SIM800x/Src/SIM800x.c@{C:/Users/Jonatan/OneDrive/Escritorio/PCSE/Driver\_SIM800x/Src/SIM800x.c}}


This file presents the source code for the implementation of each function prototype described in the \doxyref{SIM800x.\+h}{p.}{_s_i_m800x_8h} file.  


{\ttfamily \#include \char`\"{}SIM800x.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \textbf{ SIM800\+\_\+\+Config\+HW} (UART\+\_\+\+Handle\+Type\+Def $\ast$uart\+Handler, \textbf{ Port\+\_\+t} power\+Key\+Port, uint16\+\_\+t power\+Key\+Pin, \textbf{ Port\+\_\+t} reset\+Port, uint16\+\_\+t reset\+Pin)
\begin{DoxyCompactList}\small\item\em Configures the UART, power\+Key and reset pins all user-\/defined. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ SIM800\+\_\+\+Default\+\_\+\+Config\+HW} ()
\begin{DoxyCompactList}\small\item\em Configures the UART and power\+Key and reset pins by default. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ SIM800\+\_\+\+Init} ()
\begin{DoxyCompactList}\small\item\em Configure the SIM to work in text mode and with a baud rate of 9600 baud. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ check\+\_\+\+Network\+\_\+\+Registration} (void)
\begin{DoxyCompactList}\small\item\em Check if the SIM is registered in the GSM network. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ send\+\_\+\+SMS} (uint8\+\_\+t $\ast$cell\+Number, uint8\+\_\+t $\ast$message)
\begin{DoxyCompactList}\small\item\em Sends a text message to a user-\/specified number. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ list\+\_\+\+Received\+\_\+\+SMS\+\_\+} (const uint8\+\_\+t $\ast$sms\+To\+Search, const uint8\+\_\+t $\ast$status)
\begin{DoxyCompactList}\small\item\em This function searches for the text specified in the message parameter, in the message(s) stored in the SIMCARD SMS message list using the storage filter specified by the status parameter. @detail There should only be 1 unread message when using the RECEIVED UNREAD status. AT command used\+: AT+\+CMGL @parm Pointer to buffer of type uint8\+\_\+t containing the text to be searched in the SMS message @parm Pointer to buffer of type uint8\+\_\+t containing the status parameter -\/ pag.\+109 AT Command SIM800. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ delete\+\_\+\+SMS} (uint8\+\_\+t index, uint8\+\_\+t flag)
\begin{DoxyCompactList}\small\item\em Delete SMS Message from preferred message storage. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ call} (uint8\+\_\+t $\ast$cell\+Number)
\begin{DoxyCompactList}\small\item\em Starts a voice call to the number specified by the parameter cell\+Number. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ end\+Call} (void)
\begin{DoxyCompactList}\small\item\em Ends a voice call in progress. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ check\+\_\+\+GPRS\+\_\+\+Connection} (void)
\begin{DoxyCompactList}\small\item\em Check if the SIM is connected to the GPRS service. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ disable\+\_\+\+GPRS\+\_\+\+PDP\+\_\+\+Context} (void)
\begin{DoxyCompactList}\small\item\em Deactivate GPRS PDP(\+Packet Data Protocol) context. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ set\+\_\+\+Application\+\_\+\+Mode\+\_\+\+TCPUDP} (uint8\+\_\+t tcpip\+\_\+app\+Mode)
\begin{DoxyCompactList}\small\item\em Configure the SIM in command mode or transparent mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ set\+APN} (uint8\+\_\+t $\ast$apn)
\begin{DoxyCompactList}\small\item\em Configure the APN (Access Point Name). \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ bring\+\_\+\+Up\+\_\+\+Wireless\+\_\+\+Connection} (void)
\begin{DoxyCompactList}\small\item\em Bring up wireless connection with GPRS or CSD. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ start\+\_\+\+Up\+\_\+\+TCPUDP\+\_\+\+Connection} (uint8\+\_\+t $\ast$connection, uint8\+\_\+t $\ast$ip\+\_\+address, uint8\+\_\+t $\ast$port)
\begin{DoxyCompactList}\small\item\em Get Local IP Address and Start Up TCP/\+UDP Connection. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ close\+\_\+\+TCPUDP\+\_\+\+Connection} (void)
\begin{DoxyCompactList}\small\item\em Close TCP or UDP connection. \end{DoxyCompactList}\item 
uint8\+\_\+t \textbf{ send\+\_\+\+Data\+\_\+\+TCPUDP} (uint8\+\_\+t $\ast$data, uint8\+\_\+t tcpip\+\_\+app\+Mode)
\begin{DoxyCompactList}\small\item\em Send data through TCP or UDP connection to the server. \end{DoxyCompactList}\item 
void \textbf{ enable\+\_\+\+AT\+\_\+\+CMD\+\_\+\+In\+\_\+\+Transparent\+\_\+\+Mode} (void)
\begin{DoxyCompactList}\small\item\em Temporarily enable AT commands in transparent mode. \end{DoxyCompactList}\item 
void \textbf{ SIM800\+\_\+\+On} ()
\begin{DoxyCompactList}\small\item\em Turn on SIM. \end{DoxyCompactList}\item 
void \textbf{ SIM800\+\_\+\+Off} (void)
\begin{DoxyCompactList}\small\item\em Turn off SIM. \end{DoxyCompactList}\item 
void \textbf{ SIM800\+\_\+restart} (void)
\begin{DoxyCompactList}\small\item\em Restart SIM. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file presents the source code for the implementation of each function prototype described in the \doxyref{SIM800x.\+h}{p.}{_s_i_m800x_8h} file. 

\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
24/10/2022 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Yonatan Aguirre 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\label{_s_i_m800x_8c_abf2816d9a9009fd76ef89f11f2b0ddf9}} 
\index{SIM800x.c@{SIM800x.c}!bring\_Up\_Wireless\_Connection@{bring\_Up\_Wireless\_Connection}}
\index{bring\_Up\_Wireless\_Connection@{bring\_Up\_Wireless\_Connection}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{bring\_Up\_Wireless\_Connection()}
{\footnotesize\ttfamily uint8\+\_\+t bring\+\_\+\+Up\+\_\+\+Wireless\+\_\+\+Connection (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Bring up wireless connection with GPRS or CSD. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CIICR AT+\+CIICR will change to IP CONFIG status, only if the status was previously IP START (APN configured). After module accepts the activated operation, if it is activated successfully, module state will be changed to IP GPRSACT, and it responds OK, otherwise it will respond ERROR. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ wireless connection successful. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error connecting. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_ab891b5e7c829e6ca2eff176a1cd52aef}} 
\index{SIM800x.c@{SIM800x.c}!call@{call}}
\index{call@{call}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{call()}
{\footnotesize\ttfamily uint8\+\_\+t call (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{cell\+Number }\end{DoxyParamCaption})}



Starts a voice call to the number specified by the parameter cell\+Number. 

\begin{DoxyNote}{Note}
AT command used\+: ATD 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Pointer} & to buffer of type uint8\+\_\+t containing the cell number \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Call started \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error starting call \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a2852a772d52eaaaf078d9cc6e32f8e30}} 
\index{SIM800x.c@{SIM800x.c}!check\_GPRS\_Connection@{check\_GPRS\_Connection}}
\index{check\_GPRS\_Connection@{check\_GPRS\_Connection}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{check\_GPRS\_Connection()}
{\footnotesize\ttfamily uint8\+\_\+t check\+\_\+\+GPRS\+\_\+\+Connection (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Check if the SIM is connected to the GPRS service. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CGATT 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Connected to GPRS service. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Disconnected to GPRS service. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a574c8c2e38f5a6a84815b42dd616f39c}} 
\index{SIM800x.c@{SIM800x.c}!check\_Network\_Registration@{check\_Network\_Registration}}
\index{check\_Network\_Registration@{check\_Network\_Registration}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{check\_Network\_Registration()}
{\footnotesize\ttfamily uint8\+\_\+t check\+\_\+\+Network\+\_\+\+Registration (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Check if the SIM is registered in the GSM network. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CREG 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ SIM is registered in the network. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ SIM is not registered in the network. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_aad86c569e20f09463f593c80bde47f5d}} 
\index{SIM800x.c@{SIM800x.c}!close\_TCPUDP\_Connection@{close\_TCPUDP\_Connection}}
\index{close\_TCPUDP\_Connection@{close\_TCPUDP\_Connection}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{close\_TCPUDP\_Connection()}
{\footnotesize\ttfamily uint8\+\_\+t close\+\_\+\+TCPUDP\+\_\+\+Connection (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Close TCP or UDP connection. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CIPCLOSE This command only closes connection at corresponding status of TCP/\+UDP stack. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Close successful. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Close fail. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a71ddc3e432a8f877495d61e87040d82b}} 
\index{SIM800x.c@{SIM800x.c}!delete\_SMS@{delete\_SMS}}
\index{delete\_SMS@{delete\_SMS}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{delete\_SMS()}
{\footnotesize\ttfamily uint8\+\_\+t delete\+\_\+\+SMS (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{index,  }\item[{uint8\+\_\+t}]{flag }\end{DoxyParamCaption})}



Delete SMS Message from preferred message storage. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CMGD @parm Integer value of type uint8\+\_\+t indicating the position of the message to be deleted. @parm Integer value of type uint8\+\_\+t indicating the indicating the criteria for deleting messages. 
\end{DoxyNote}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Message deleted \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error deleting message \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a7dfb3bb346bb61d9f2d1e1d0b8c1e04d}} 
\index{SIM800x.c@{SIM800x.c}!disable\_GPRS\_PDP\_Context@{disable\_GPRS\_PDP\_Context}}
\index{disable\_GPRS\_PDP\_Context@{disable\_GPRS\_PDP\_Context}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{disable\_GPRS\_PDP\_Context()}
{\footnotesize\ttfamily uint8\+\_\+t disable\+\_\+\+GPRS\+\_\+\+PDP\+\_\+\+Context (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Deactivate GPRS PDP(\+Packet Data Protocol) context. 

\begin{DoxyNote}{Note}
After it is closed, the status is IP INITIAL AT command used\+: AT+\+CIPSHUT 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ IP logging successfully disabled. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error when trying to disable context. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a173298500f5e6b33cf24f2dce054f755}} 
\index{SIM800x.c@{SIM800x.c}!enable\_AT\_CMD\_In\_Transparent\_Mode@{enable\_AT\_CMD\_In\_Transparent\_Mode}}
\index{enable\_AT\_CMD\_In\_Transparent\_Mode@{enable\_AT\_CMD\_In\_Transparent\_Mode}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{enable\_AT\_CMD\_In\_Transparent\_Mode()}
{\footnotesize\ttfamily void enable\+\_\+\+AT\+\_\+\+CMD\+\_\+\+In\+\_\+\+Transparent\+\_\+\+Mode (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Temporarily enable AT commands in transparent mode. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CIPCLOSE 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_ad45ecf1c352994094c04bfe53e388cf3}} 
\index{SIM800x.c@{SIM800x.c}!endCall@{endCall}}
\index{endCall@{endCall}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{endCall()}
{\footnotesize\ttfamily uint8\+\_\+t end\+Call (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Ends a voice call in progress. 

\begin{DoxyNote}{Note}
AT command used\+: ATH 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Call ended \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error ending call \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_ab435ceb5ec07c87b346dd99fe620edb6}} 
\index{SIM800x.c@{SIM800x.c}!list\_Received\_SMS\_@{list\_Received\_SMS\_}}
\index{list\_Received\_SMS\_@{list\_Received\_SMS\_}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{list\_Received\_SMS\_()}
{\footnotesize\ttfamily uint8\+\_\+t list\+\_\+\+Received\+\_\+\+SMS\+\_\+ (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{sms\+To\+Search,  }\item[{const uint8\+\_\+t $\ast$}]{status }\end{DoxyParamCaption})}



This function searches for the text specified in the message parameter, in the message(s) stored in the SIMCARD SMS message list using the storage filter specified by the status parameter. @detail There should only be 1 unread message when using the RECEIVED UNREAD status. AT command used\+: AT+\+CMGL @parm Pointer to buffer of type uint8\+\_\+t containing the text to be searched in the SMS message @parm Pointer to buffer of type uint8\+\_\+t containing the status parameter -\/ pag.\+109 AT Command SIM800. 


\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Message found \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Message not found \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a222f05bb43fb88a43d5445224e22d8e1}} 
\index{SIM800x.c@{SIM800x.c}!send\_Data\_TCPUDP@{send\_Data\_TCPUDP}}
\index{send\_Data\_TCPUDP@{send\_Data\_TCPUDP}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{send\_Data\_TCPUDP()}
{\footnotesize\ttfamily uint8\+\_\+t send\+\_\+\+Data\+\_\+\+TCPUDP (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{uint8\+\_\+t}]{tcpip\+\_\+app\+Mode }\end{DoxyParamCaption})}



Send data through TCP or UDP connection to the server. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CIPSEND 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Pointer} & to buffer of type uint8\+\_\+t containing the data to send \\
\hline
{\em Integer} & value that specifies the application mode\+: COMMAND MODE(0) or TRANSPARENT MODE(1) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Data successfully sent. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error sending data. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_acb32bfc3c0046ba8e9fb495c89643ad1}} 
\index{SIM800x.c@{SIM800x.c}!send\_SMS@{send\_SMS}}
\index{send\_SMS@{send\_SMS}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{send\_SMS()}
{\footnotesize\ttfamily uint8\+\_\+t send\+\_\+\+SMS (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{cell\+Number,  }\item[{uint8\+\_\+t $\ast$}]{message }\end{DoxyParamCaption})}



Sends a text message to a user-\/specified number. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CMGS @parm Pointer to buffer of type uint8\+\_\+t containing the cell number to which the message is to be sent. @parm Pointer to buffer of type uint8\+\_\+t containing the text to send 
\end{DoxyNote}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Message sent \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Message not sent \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_ae9514a45bbbcff74fe1a19b23d25d246}} 
\index{SIM800x.c@{SIM800x.c}!set\_Application\_Mode\_TCPUDP@{set\_Application\_Mode\_TCPUDP}}
\index{set\_Application\_Mode\_TCPUDP@{set\_Application\_Mode\_TCPUDP}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{set\_Application\_Mode\_TCPUDP()}
{\footnotesize\ttfamily uint8\+\_\+t set\+\_\+\+Application\+\_\+\+Mode\+\_\+\+TCPUDP (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{tcpip\+\_\+app\+Mode }\end{DoxyParamCaption})}



Configure the SIM in command mode or transparent mode. 

\begin{DoxyNote}{Note}
When connected to a server, in \char`\"{}transparent\char`\"{} mode all data received by the UART is sent directly to the server, so the use of AT commands is not allowed. In case you want to enable AT commands use the function \doxyref{enable\+\_\+\+AT\+\_\+\+CMD\+\_\+\+In\+\_\+\+Transparent\+\_\+\+Mode()}{p.}{_s_i_m800x_8c_a173298500f5e6b33cf24f2dce054f755}. AT command used\+: AT+\+CIPMODE 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Application} & mode\+: COMMAND or TRANSPARENT. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ Application mode configured correctly. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error while trying to configure the application mode. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_aad203bca071f5975c956a7cb79683213}} 
\index{SIM800x.c@{SIM800x.c}!setAPN@{setAPN}}
\index{setAPN@{setAPN}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{setAPN()}
{\footnotesize\ttfamily uint8\+\_\+t set\+APN (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{apn }\end{DoxyParamCaption})}



Configure the APN (Access Point Name). 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CSTT The write command and execution command of this command is valid only at the state of IP INITIAL. So it is necessary to execute the function \doxyref{disable\+\_\+\+GPRS\+\_\+\+PDP\+\_\+\+Context()}{p.}{_s_i_m800x_8c_a7dfb3bb346bb61d9f2d1e1d0b8c1e04d} before user establishes a TCP/\+UDP connection with this command when the state is not IP INITIAL or IP STATUS. After this command is executed, the state will be changed to IP START. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Pointer} & to buffer of type uint8\+\_\+t containing the APN of the mobile operator. The max length is 50 bytes for APN \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ APN configured correctly. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error when configuring APN. \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a6ab3c07bf7e579925c9cdb986e6c636b}} 
\index{SIM800x.c@{SIM800x.c}!SIM800\_ConfigHW@{SIM800\_ConfigHW}}
\index{SIM800\_ConfigHW@{SIM800\_ConfigHW}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{SIM800\_ConfigHW()}
{\footnotesize\ttfamily uint8\+\_\+t SIM800\+\_\+\+Config\+HW (\begin{DoxyParamCaption}\item[{UART\+\_\+\+Handle\+Type\+Def $\ast$}]{uart\+Handler,  }\item[{\textbf{ Port\+\_\+t}}]{power\+Key\+Port,  }\item[{uint16\+\_\+t}]{power\+Key\+Pin,  }\item[{\textbf{ Port\+\_\+t}}]{reset\+Port,  }\item[{uint16\+\_\+t}]{reset\+Pin }\end{DoxyParamCaption})}



Configures the UART, power\+Key and reset pins all user-\/defined. 


\begin{DoxyParams}{Parameters}
{\em Pointer} & to UART\+\_\+\+Handle\+Type\+Def UART\+\_\+\+Handle structure. \\
\hline
{\em GPIO} & Port for power\+Key \\
\hline
{\em GPIO} & Pin for power\+Key \\
\hline
{\em GPIO} & Port for reset \\
\hline
{\em GPIO} & Pin for reset \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a59e48871d5235534c52536a91fd1472a}} 
\index{SIM800x.c@{SIM800x.c}!SIM800\_Default\_ConfigHW@{SIM800\_Default\_ConfigHW}}
\index{SIM800\_Default\_ConfigHW@{SIM800\_Default\_ConfigHW}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{SIM800\_Default\_ConfigHW()}
{\footnotesize\ttfamily uint8\+\_\+t SIM800\+\_\+\+Default\+\_\+\+Config\+HW (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Configures the UART and power\+Key and reset pins by default. 

\begin{DoxyNote}{Note}
The UART1 is used by default. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Pointer} & to structure UART\+\_\+\+Handle\+Type\+Def \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a183896daece3e403b834ac2e2a75856e}} 
\index{SIM800x.c@{SIM800x.c}!SIM800\_Init@{SIM800\_Init}}
\index{SIM800\_Init@{SIM800\_Init}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{SIM800\_Init()}
{\footnotesize\ttfamily uint8\+\_\+t SIM800\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Configure the SIM to work in text mode and with a baud rate of 9600 baud. 

\begin{DoxyNote}{Note}
This function implements an auto-\/bauding routine as this is how the SIM is configured in the factory. The serial interface has to be operated at 8 data bits, no parity and 1 stop bit. The AT commands that are executed in this function are\+:
\begin{DoxyEnumerate}
\item AT+\+IPR=9600 -\/ Set baud rate to 9600
\item AT+\+CMGF=1 -\/ Set the message system to text mode 
\end{DoxyEnumerate}
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_aafda24b1293bcdbd74adfcc7e3878276}} 
\index{SIM800x.c@{SIM800x.c}!SIM800\_Off@{SIM800\_Off}}
\index{SIM800\_Off@{SIM800\_Off}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{SIM800\_Off()}
{\footnotesize\ttfamily void SIM800\+\_\+\+Off (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Turn off SIM. 


\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None.} & \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a69c0cd72b2dcb36e22c72d3e8525610f}} 
\index{SIM800x.c@{SIM800x.c}!SIM800\_On@{SIM800\_On}}
\index{SIM800\_On@{SIM800\_On}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{SIM800\_On()}
{\footnotesize\ttfamily void SIM800\+\_\+\+On (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Turn on SIM. 


\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None.} & \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a5096d0e21cb6f6fdfbdec274bfc951b5}} 
\index{SIM800x.c@{SIM800x.c}!SIM800\_restart@{SIM800\_restart}}
\index{SIM800\_restart@{SIM800\_restart}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{SIM800\_restart()}
{\footnotesize\ttfamily void SIM800\+\_\+restart (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Restart SIM. 


\begin{DoxyParams}{Parameters}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None.} & \\
\hline
\end{DoxyRetVals}
\mbox{\label{_s_i_m800x_8c_a2ad51d83a0012dfb4a14349333f74148}} 
\index{SIM800x.c@{SIM800x.c}!start\_Up\_TCPUDP\_Connection@{start\_Up\_TCPUDP\_Connection}}
\index{start\_Up\_TCPUDP\_Connection@{start\_Up\_TCPUDP\_Connection}!SIM800x.c@{SIM800x.c}}
\doxysubsubsection{start\_Up\_TCPUDP\_Connection()}
{\footnotesize\ttfamily uint8\+\_\+t start\+\_\+\+Up\+\_\+\+TCPUDP\+\_\+\+Connection (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{connection,  }\item[{uint8\+\_\+t $\ast$}]{ip\+\_\+address,  }\item[{uint8\+\_\+t $\ast$}]{port }\end{DoxyParamCaption})}



Get Local IP Address and Start Up TCP/\+UDP Connection. 

\begin{DoxyNote}{Note}
AT command used\+: AT+\+CIFSR Only after PDP context is activated, local IP address can be obtained by this command, otherwise it will respond ERROR. AT command used\+: AT+\+CIPSTAR This command allows establishment of a TCP/\+UDP connection only when there is a local IP address. To check the status you can use the function send\+\_\+\+Test\+\_\+\+Read\+\_\+\+AT\+\_\+\+CMD and send as parameter \char`\"{}\+CIPSTATUS\char`\"{}. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Pointer} & of type uint8\+\_\+t containing the connection type\+: TCP or UDP. \\
\hline
{\em Pointer} & to buffer of type uint8\+\_\+t containing the remote server IP address \\
\hline
{\em Pointer} & of type uint8\+\_\+t containing the remote server port \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Integer} & Value\+: \doxyref{OK(0)}{p.}{_s_i_m800x_8h_aba51915c87d64af47fb1cc59348961c9} -\/ TCP/\+UDP connection successful. \doxyref{ERROR(1)}{p.}{_s_i_m800x_8h_a8fe83ac76edc595f6b98cd4a4127aed5} -\/ Error connecting. \\
\hline
\end{DoxyRetVals}
